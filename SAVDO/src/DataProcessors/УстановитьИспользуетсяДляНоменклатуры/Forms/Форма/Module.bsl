///////////////////////////////////////////////////////////////////////////////////////////////////////
// Обработка для установки реквизита Используется = Истина для предопределенного элемента
// Справочник_Номенклатура в справочнике НаборыДополнительныхРеквизитовИСведений
///////////////////////////////////////////////////////////////////////////////////////////////////////

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// СтандартнаяОбработка = Ложь;
	
КонецПроцедуры

&НаКлиенте
Процедура Выполнить(Команда)
	
	ВыполнитьНаСервере();
	
КонецПроцедуры

&НаСервере
Процедура ВыполнитьНаСервере()
	
	Попытка
		
		// Устанавливаем константу функциональной опции
		Константы.ИспользоватьДополнительныеРеквизитыИСведения.Установить(Истина);
		
		// Устанавливаем реквизит Используется для предопределенного элемента
		НаборСвойств = Справочники.НаборыДополнительныхРеквизитовИСведений.Справочник_Номенклатура;
		
		Если НаборСвойств.Пустая() Тогда
			ВызватьИсключение "Предопределенный элемент Справочник_Номенклатура не найден! Сначала обновите конфигурацию базы данных.";
		КонецЕсли;
		
		ОбъектНабора = НаборСвойств.ПолучитьОбъект();
		
		Если ОбъектНабора = Неопределено Тогда
			ВызватьИсключение "Не удалось получить объект предопределенного элемента!";
		КонецЕсли;
		
		ОбъектНабора.Используется = Истина;
		ОбъектНабора.Записать();
		
		Сообщить("Готово! Функциональная опция включена и реквизит Используется установлен в значение Истина.");
		
	Исключение
		
		Сообщить("Ошибка: " + ОписаниеОшибки());
		
	КонецПопытки;
	
КонецПроцедуры

